# SingleUserOnlineSystem
单点登录系统设计方案：

整个系统分为两部分：
使用Node实现的后台svr以及使用Android实现的客户端。
前后端通信通过gRPC实现，使用RSA、md5、加盐来对数据传递进行处理；数据存储通过mysql实现。
客户端核心逻辑通过C++实现，通过DJinni提供不同平台的接口，从而实现跨平台。界面通过Android实现。

功能设计：

1.	用户注册功能。客户端使用svr的公钥加密，将密码传递给svr，svr私钥解密后存储到数据库。
2.	用户登录功能。客户端将密码与时间戳计算md5，传递给svr，svr查数据库得到密码，并通过时间戳计算md5，并与客户端传递的值进行校验。
3.	单点登录功能。用户登录后，svr在内存中保留所有用户的登录call，在用户登录时，先检查该用户是否已经登录过，如果有，则登出原有的用户，并让新的请求登录成功。
4.	按规则踢出用户。Svr端通过mysql记录规则，每分钟查询一次，将符合规则的用户踢出。


新增：

 1.新增SingleUserOnlineSvrCpp
  该项目为使用C++完成的grpc svr；
  
 2.优化了数据库中pwd的存储
 
 3.增加了bazel打包SvrCpp
 
 
 遗留问题：
 
 1.目前Android通过cmakeList完成打包，直接增量编译了grpc源码，如果系统中安装有openssl1.0.2+，则会导致boringssl无法打包进so。
    fix方法：使用grpc的so，不在使用源码编译；后面再修改
    
 2.目前SvrCpp直接使用了编译好的grpc的相关库，后面可以尝试下做个开关；控制是从grpc源码打包或是用.a库
 
 3.目前使用的是grpc的insecure连接，系统未部署在真实服务器上
 
